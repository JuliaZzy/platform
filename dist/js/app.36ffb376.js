(function(){"use strict";var t={1602:function(t,e,a){var s=a(5471),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},r=[],n={name:"App"},o=n,l=a(1656),c=(0,l.A)(o,i,r,!1,null,null,null),d=c.exports,h=a(173),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-container"},[t._m(0),e("div",{staticClass:"admin"},[e("button",{staticClass:"admin-login-button",on:{click:t.openLoginModal}},[t._v("管理员登录")])]),t.isLoginModalVisible?e("div",{staticClass:"login-modal"},[e("div",{staticClass:"modal-content"},[e("LoginForm",{on:{"login-success":t.handleLoginSuccess}}),e("button",{staticClass:"login-close-button",on:{click:t.closeLoginModal}},[t._v("关闭")])],1)]):t._e(),e("div",{staticClass:"description"},[t._v(" 说明：管理员拥有全部功能，可以实现对底层数据（入表企业清单）的日常维护；普通用户无法增删改，只能浏览、查询和下载。 ")]),e("div",{staticClass:"status-row"},t._l(t.labels,(function(a,s){return e("div",{key:s,staticClass:"status-box",class:{clickable:"非上市公司入表"===a||"上市公司入表"===a},on:{click:function(e){return t.handleStatusBoxClick(a)}}},[e("h3",[t._v("截至"+t._s(t.currentMonth))]),e("p",{staticClass:"status-title"},[t._v(t._s(a))]),e("p",{staticClass:"status-number"},[t._v(" "+t._s("上市公司入表"===a?t.listedCompanyCount:"非上市公司入表"===a?t.nonListedCompanyCount:"暂无数据")+" 家 ")]),e("div",{staticClass:"status-note"},[t._v("点击查看详情")])])})),0),t._m(1),e("div",{staticClass:"grid-container"},[e("div",{staticClass:"grid-item"},[e("table",[t._m(2),t._l(t.listedCompanies,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.company_name))])])})),t.firstTablePages>1?e("tr",[e("td",{staticClass:"pagination",attrs:{colspan:"2"}},[t.firstTablePage>1?e("button",{on:{click:function(e){return t.changePage("firstTable",t.firstTablePage-1)}}},[t._v("上一页")]):t._e(),e("span",[t._v(t._s(t.firstTablePage)+" / "+t._s(t.firstTablePages))]),t.firstTablePage<t.firstTablePages?e("button",{on:{click:function(e){return t.changePage("firstTable",t.firstTablePage+1)}}},[t._v("下一页")]):t._e()])]):t._e()],2)]),e("div",{staticClass:"grid-item"},[e("table",[t._m(3),t._l(t.nonListedCompanies,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.company_name))])])})),t.secondTablePages>1?e("tr",[e("td",{staticClass:"pagination",attrs:{colspan:"2"}},[t.secondTablePage>1?e("button",{on:{click:function(e){return t.changePage("secondTable",t.secondTablePage-1)}}},[t._v("上一页")]):t._e(),e("span",[t._v(t._s(t.secondTablePage)+" / "+t._s(t.secondTablePages))]),t.secondTablePage<t.secondTablePages?e("button",{on:{click:function(e){return t.changePage("secondTable",t.secondTablePage+1)}}},[t._v("下一页")]):t._e()])]):t._e()],2)]),e("div",{staticClass:"grid-item"},[e("table",[t._m(4),t._m(5),t._m(6),t.thirdTablePages>1?e("tr",[e("td",{staticClass:"pagination",attrs:{colspan:"2"}},[t.thirdTablePage>1?e("button",{on:{click:function(e){return t.changePage("thirdTable",t.thirdTablePage-1)}}},[t._v("上一页")]):t._e(),e("span",[t._v(t._s(t.thirdTablePage)+" / "+t._s(t.thirdTablePages))]),t.thirdTablePage<t.thirdTablePages?e("button",{on:{click:function(e){return t.changePage("thirdTable",t.thirdTablePage+1)}}},[t._v("下一页")]):t._e()])]):t._e()])])]),t._m(7)])},u=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("img",{attrs:{src:a(8305),alt:"Header Image"}}),t._v(" "),e("div",{staticClass:"header-content"},[e("div",{staticClass:"left"},[e("h1",[t._v("中国企业数据资产"),e("br"),t._v("入表跟踪")]),e("p",[t._v("Discover the Power of"),e("br"),t._v("Partnership for"),e("br"),t._v("Sustainable Water Solutions")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-header-container"},[e("div",{staticClass:"table-header"},[e("i",{staticClass:"fas fa-list"}),t._v(" "),e("span",[t._v("榜单")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("上市公司入表清单")])])},function(){var t=this,e=t._self._c;return e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("非上市公司表清单")])])},function(){var t=this,e=t._self._c;return e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("数据资产融资清单")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("2025年3月")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("2024年12月")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-overlay"}),e("img",{staticClass:"footer-bg",attrs:{src:a(8547),alt:"Footer Image"}}),e("div",{staticClass:"footer-content"},[e("a",{attrs:{href:""}},[t._v("联系我们")]),e("a",{attrs:{href:""}},[t._v("反馈意见/申报")])])])}],m=(a(4114),a(4335)),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-form"},[e("h2",{staticClass:"title"},[t._v("管理员登录")]),t._v(" "),e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"username"}},[t._v("用户名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",placeholder:"请输入用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"password"}},[t._v("密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("button",{on:{click:t.handleLogin}},[t._v("登录")]),t.errorMessage?e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.errorMessage))]):t._e()])},v=[],g={name:"LoginForm",data(){return{username:"",password:"",errorMessage:""}},methods:{handleLogin(){this.username&&this.password?m.A.post("/api/login",{username:this.username,password:this.password},{headers:{"Content-Type":"application/json"}}).then((t=>{t.data.success?(localStorage.setItem("adminLoggedIn","true"),this.$emit("login-success")):this.errorMessage="用户名或密码错误"})).catch((t=>{console.error("登录失败:",t),this.errorMessage="登录失败，请稍后重试"})):this.errorMessage="用户名和密码不能为空"}}},_=g,b=(0,l.A)(_,f,v,!1,null,"6e573858",null),C=b.exports,y={name:"App",components:{LoginForm:C},data(){return{currentMonth:"",labels:["上市公司入表","非上市公司入表","凭数据资产融资"],listedCompanyCount:0,listedCompanies:[],nonListedCompanyCount:0,nonListedCompanies:[],firstTablePage:1,firstTablePages:1,secondTablePage:1,secondTablePages:1,thirdTablePage:1,thirdTablePages:1,isLoginModalVisible:!1}},mounted(){const t=new Date,e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0");this.currentMonth=`${e}年${a}月`,this.fetchCompanies()},methods:{fetchCompanies(){m.A.get("/api/company/listed-companies-count").then((t=>{this.listedCompanyCount=t.data.count,this.firstTablePages=Math.ceil(this.listedCompanyCount/10)})).catch((t=>{console.error("获取上市公司数量失败:",t)})),m.A.get(`/api/company/listed-companies?page=${this.firstTablePage}`).then((t=>{this.listedCompanies=t.data})).catch((t=>{console.error("获取上市公司列表失败:",t)})),m.A.get("/api/company/non-listed-companies-count").then((t=>{this.nonListedCompanyCount=t.data.count,this.secondTablePages=Math.ceil(this.nonListedCompanyCount/10)})).catch((t=>{console.error("获取非上市公司数量失败:",t)})),m.A.get(`/api/company/non-listed-companies?page=${this.secondTablePage}`).then((t=>{this.nonListedCompanies=t.data.data,this.nonListedCompanyCount=t.data.total,this.secondTablePages=Math.ceil(this.nonListedCompanyCount/10)})),m.A.get(`/api/company/non-listed-companies?page=${this.thirdTablePage}`).then((t=>{this.thirdTablePages=Math.ceil(t.data.count/10)}))},changePage(t,e){e<1||e>this[`${t}Pages`]||(this[`${t}Page`]=e,this.fetchCompanies())},openLoginModal(){this.isLoginModalVisible=!0},closeLoginModal(){this.isLoginModalVisible=!1},handleLoginSuccess(){this.closeLoginModal(),this.$router.push("/admin-page")},handleStatusBoxClick(t){"非上市公司入表"===t?this.$router.push("/dashboard"):"上市公司入表"===t&&this.$router.push("/lsdashboard")}}},w=y,P=(0,l.A)(w,p,u,!1,null,"9f8e441c",null),x=P.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-page"},[t._m(0),e("FilterSection",{on:{"filter-change":t.handleFilterChange}}),e("div",{staticClass:"dashboard-container"},[e("ChartRow",{attrs:{filters:t.filters}}),e("DataTable",{attrs:{filters:t.filters},on:{"page-data":function(e){t.currentPageData=e}}})],1)],1)},D=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-title-block"},[e("h1",{staticClass:"dashboard-title"},[t._v("非上市公司数据资产情况")]),e("p",{staticClass:"dashboard-subtitle"},[t._v("Overview of Non-listed Company Data Assets")])])}],A=(a(8111),a(1701),function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-section"},[e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-item"},[e("label",[t._v("入表时间：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.startDate=e.target.multiple?a:a[0]},t.emitFilters]}},[e("option",{attrs:{value:""}},[t._v("开始时间")]),t._l(t.options.month_time,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])}))],2),e("span",{staticClass:"to-text"},[t._v("-")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.endDate=e.target.multiple?a:a[0]},t.emitFilters]}},[e("option",{attrs:{value:""}},[t._v("结束时间")]),t._l(t.options.month_time,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])}))],2)]),e("div",{staticClass:"filter-item"},[e("label",[t._v("省级行政区：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.province,expression:"province"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.province=e.target.multiple?a:a[0]},t.emitFilters]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.options.province_area,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])}))],2)])]),e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-item"},[e("label",[t._v("入表企业：")]),e("el-select",{attrs:{filterable:"",remote:"",clearable:"",placeholder:"请输入关键词","remote-method":t.fetchCompanyOptions,loading:t.loading.company},on:{change:t.emitFilters},model:{value:t.company,callback:function(e){t.company=e},expression:"company"}},t._l(t.companyOptions,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"filter-item"},[e("label",[t._v("数据资产内容：")]),e("el-select",{attrs:{filterable:"",remote:"",clearable:"",placeholder:"请输入关键词","remote-method":t.fetchContentOptions,loading:t.loading.content},on:{change:t.emitFilters},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},t._l(t.contentOptions,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"filter-item"},[e("button",{staticClass:"clear-all-btn",on:{click:t.clearFilters}},[t._v("清除筛选")])])])])}),k=[],O={name:"FilterSection",data(){return{startDate:"",endDate:"",province:"",company:"",content:"",companyOptions:[],contentOptions:[],options:{month_time:[],province_area:[]},loading:{company:!1,content:!1}}},mounted(){this.fetchOptions()},methods:{fetchOptions(){m.A.get("/api/nlasset/options").then((t=>{this.options.month_time=t.data.month_time||[],this.options.province_area=t.data.province_area||[]})).catch((t=>{console.error("加载筛选项失败:",t)}))},fetchCompanyOptions(t){t&&(this.loading.company=!0,m.A.get(`/api/nlasset/search/company?q=${t}`).then((t=>{this.companyOptions=t.data})).finally((()=>{this.loading.company=!1})))},fetchContentOptions(t){t&&(this.loading.content=!0,m.A.get(`/api/nlasset/search/content?q=${t}`).then((t=>{this.contentOptions=t.data})).finally((()=>{this.loading.content=!1})))},emitFilters(){this.$emit("filter-change",{startDate:this.startDate,endDate:this.endDate,province:this.province,company:this.company,content:this.content})},clearFilters(){this.startDate="",this.endDate="",this.province="",this.company="",this.content="",this.emitFilters()}}},F=O,T=(0,l.A)(F,A,k,!1,null,"22f597b4",null),$=T.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-grid"},[e("div",{staticClass:"chart-row"},[e("div",{staticClass:"chart-bar40"},[e("BarChart1",{attrs:{filters:t.filters}})],1),e("div",{staticClass:"chart-pie60"},[e("PieChart1",{attrs:{filters:t.filters}})],1)]),e("div",{staticClass:"chart-row"},[e("div",{staticClass:"chart-full"},[e("BarChart2",{attrs:{filters:t.filters}})],1)]),e("div",{staticClass:"chart-row"},[e("div",{staticClass:"chart-half"},[e("PieChart2",{attrs:{filters:t.filters}})],1),e("div",{staticClass:"chart-half"},[e("PieChart3",{attrs:{filters:t.filters}})],1)])])},M=[],j=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各省份企业数量")]),e("v-chart",{staticStyle:{width:"100%",height:"360px"},attrs:{option:t.barChartOption}})],1)},R=[],B=a(6589);const E=["#003049","#005f73","#0a9396","#94d2bd","#e9d8a6","#ee9b00","#ca6702","#bb3e03","#780000","#c1121f","#fdf0d5","#669bbc"];var N=E,z=a(3087),q=a(6411),K=a(2094),W=a(4064),U=a(3416),V=a(260),H=a(5116);(0,z.Y)([q.a,K.a,W.a,U.a,V.a,H.a]);var I=(0,s.defineComponent)({name:"BarChart1",components:{"v-chart":B.Ay},props:["filters"],data(){return{barChartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/nlasset/stats",{field:"province_area",filters:this.filters}).then((t=>{const e=t.data;this.barChartOption={color:N,tooltip:{},xAxis:{type:"category",data:e.map((t=>t.name)),axisLabel:{rotate:30,overflow:"truncate",formatter:function(t){return t.length>6?t.slice(0,6)+"…":t}}},yAxis:{type:"value",name:"入表企业数量（家）",nameLocation:"middle",nameGap:40,nameTextStyle:{fontSize:12}},series:[{type:"bar",data:e.map((t=>t.value))}]}})).catch((t=>{console.error("加载图表失败:",t)}))}}}),Y=I,G=(0,l.A)(Y,j,R,!1,null,"15aadf71",null),X=G.exports,J=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各企业类型与行政级别占比")]),e("v-chart",{staticStyle:{width:"100%",height:"360px"},attrs:{option:t.chartOption}})],1)},Q=[],Z=a(6261),tt=a(2226);(0,z.Y)([q.a,Z.a,W.a,U.a,H.a,tt.a]);var et=(0,s.defineComponent)({components:{VChart:B.Ay},props:{filters:{type:Object,required:!0}},data(){return{chartOption:{}}},mounted(){this.loadData()},watch:{filters:{handler(){this.loadData()},immediate:!0,deep:!0}},methods:{async loadData(){try{const t=await m.A.post("/api/nlasset/stats",{field:"company_type",filters:this.filters}),e=t.data,a=await m.A.post("/api/nlasset/stats",{field:"admin_level",filters:{...this.filters,company_type:"地方国企"}}),s=a.data;this.chartOption={color:N,tooltip:{trigger:"item"},legend:{show:!1},series:[{name:"企业类型",type:"pie",radius:"50%",center:["25%","50%"],label:{show:!0,formatter:t=>`${t.name}: ${t.value}`,position:"outside"},labelLine:{show:!0},data:e},{name:"行政级别",type:"pie",radius:"40%",center:["75%","50%"],label:{show:!0,formatter:t=>`${t.name}: ${t.value}`,position:"inside"},labelLine:{show:!0},data:s}],graphic:[{type:"line",shape:{x1:150,y1:90,x2:455,y2:108},style:{stroke:"#888",lineWidth:1}},{type:"line",shape:{x1:150,y1:270,x2:455,y2:252},style:{stroke:"#888",lineWidth:1}}]}}catch(t){console.error("加载图表数据失败:",t)}}}}),at=et,st=(0,l.A)(at,J,Q,!1,null,"73bf471e",null),it=st.exports,rt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各企业业务类型的企业数量")]),e("v-chart",{staticStyle:{width:"1000px",height:"450px"},attrs:{option:t.chartOption}})],1)},nt=[],ot=(0,s.defineComponent)({name:"BarChart2",components:{"v-chart":B.Ay},props:["filters"],data(){return{chartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/nlasset/stats",{field:"company_business_type",filters:this.filters}).then((t=>{const e=t.data;this.chartOption={color:N,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:e.map((t=>t.name)),axisLabel:{fontSize:12,rotate:30,formatter:t=>t.length>6?t.slice(0,6)+"…":t}},yAxis:{type:"value",name:"企业业务类型",nameLocation:"middle",nameGap:60,nameTextStyle:{fontSize:14}},series:[{type:"bar",data:e.map((t=>t.value))}]}})).catch((t=>{console.error("加载 BarChart2 图表失败:",t)}))}}}),lt=ot,ct=(0,l.A)(lt,rt,nt,!1,null,"6cbf7918",null),dt=ct.exports,ht=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各数据资产类型的企业数量")]),e("v-chart",{staticStyle:{width:"600px",height:"400px"},attrs:{option:t.chartOption}})],1)},pt=[],ut=(0,s.defineComponent)({name:"PieChart2",components:{"v-chart":B.Ay},props:["filters"],data(){return{chartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/nlasset/stats",{field:"dataasset_type",filters:this.filters}).then((t=>{this.chartOption={color:N,tooltip:{trigger:"item"},legend:{show:!1},series:[{type:"pie",radius:"60%",label:{show:!0,formatter:function(t){return`${t.name}: ${t.value}`},position:"outside"},labelLine:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:t.data}]}})).catch((t=>{console.error("加载 PieChart2 图表失败:",t)}))}}}),mt=ut,ft=(0,l.A)(mt,ht,pt,!1,null,"6d600356",null),vt=ft.exports,gt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各资产登记机构的企业数量")]),e("v-chart",{staticStyle:{width:"600px",height:"400px"},attrs:{option:t.chartOption}})],1)},_t=[],bt=(0,s.defineComponent)({name:"PieChart3",components:{"v-chart":B.Ay},props:["filters"],data(){return{chartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/nlasset/stats",{field:"dataasset_register_addrtype",filters:this.filters}).then((t=>{this.chartOption={color:N,tooltip:{trigger:"item"},legend:{show:!1},series:[{type:"pie",radius:"60%",data:t.data,label:{show:!0,formatter:function(t){return`${t.name}: ${t.value}`},position:"outside"},labelLine:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})).catch((t=>{console.error("加载 PieChart3 图表失败:",t)}))}}}),Ct=bt,yt=(0,l.A)(Ct,gt,_t,!1,null,"5d056ca8",null),wt=yt.exports,Pt={name:"ChartRow",components:{BarChart1:X,PieChart1:it,BarChart2:dt,PieChart2:vt,PieChart3:wt},props:{filters:{type:Object,required:!0}}},xt=Pt,St=(0,l.A)(xt,L,M,!1,null,"24c273ce",null),Dt=St.exports,At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-section"},[e("h3",{staticClass:"section-title"},[t._v("搜索结果数据详情")]),e("div",{staticClass:"table-wrapper"},[e("table",{staticClass:"data-table"},[t._m(0),e("tbody",t._l(t.tableData,(function(a,s){return e("tr",{key:a.id},[e("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((t.currentPage-1)*t.pageSize+s+1))]),e("td",[t._v(t._s(a.month_time))]),e("td",[t._v(t._s(a.province_area))]),e("td",[t._v(t._s(a.company_name))]),e("td",[t._v(t._s(a.dataasset_type))]),e("td",[t._v(t._s(a.accounting_subject))]),e("td",[t._v(t._s(a.valuation_method))]),e("td",[t._v(t._s(a.dataasset_register_addr))]),e("td",{staticClass:"number-cell"},[t._v(t._s(t.formatNumber(a.book_value)))]),e("td",{staticClass:"number-cell"},[t._v(t._s(t.formatNumber(a.finance_value)))])])})),0)])]),e("div",{staticClass:"pagination"},[e("div",{staticClass:"pagination-left"},[e("el-dropdown",{on:{command:t.handleExportCommand}},[e("el-button",{staticClass:"export-small-btn",attrs:{type:"primary"}},[t._v(" 下载 Excel"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"all"}},[t._v("下载全部数据")]),e("el-dropdown-item",{attrs:{command:"current"}},[t._v("下载当前数据")])],1)],1)],1),e("div",{staticClass:"pagination-center"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:function(e){return t.changePage(t.currentPage-1)}}},[t._v("上一页")]),e("span",{staticClass:"page-info"},[t._v(t._s(t.currentPage)+" / "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage>=t.totalPages},on:{click:function(e){return t.changePage(t.currentPage+1)}}},[t._v("下一页")])]),e("div",{staticClass:"pagination-right"})])])},kt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticStyle:{width:"30px","text-align":"center"}},[t._v("序号")]),e("th",[t._v("入表时间")]),e("th",[t._v("省级行政区")]),e("th",[t._v("入表企业")]),e("th",[t._v("数据资产类型")]),e("th",[t._v("会计科目")]),e("th",[t._v("评估方法")]),e("th",[t._v("数据资产登记机构")]),e("th",[t._v("账面金额（万元）")]),e("th",[t._v("融资金额（万元）")])])])}],Ot=(a(7588),{name:"DataTable",props:["filters"],data(){return{currentPage:1,pageSize:10,tableData:[],totalRows:0}},watch:{filters:{handler(){this.currentPage=1,this.loadData()},immediate:!0,deep:!0}},computed:{totalPages(){return Math.max(1,Math.ceil(this.totalRows/this.pageSize))}},methods:{loadData(){m.A.post("/api/nlasset/query",{page:this.currentPage,pageSize:this.pageSize,filters:this.filters}).then((t=>{this.tableData=t.data.rows||[],this.totalRows=t.data.total||0,this.$emit("page-data",this.tableData)})).catch((t=>{console.error("加载表格失败:",t)}))},changePage(t){t<1||t>this.totalPages||(this.currentPage=t,this.loadData())},formatNumber(t){if(null===t||void 0===t||""===t)return"-";const e=parseFloat(t);return isNaN(e)?t:e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},handleExportCommand(t){"all"===t?this.downloadFull():"current"===t&&this.downloadCurrent()},downloadFull(){m.A.post("/api/nlasset/export",{filters:this.filters},{responseType:"blob"}).then((t=>this.saveBlob(t.data,"全部数据.xlsx"))).catch((t=>console.error("导出失败:",t)))},async downloadCurrent(){try{const{data:t}=await m.A.post("/api/nlasset/query",{page:1,pageSize:1e4,filters:this.filters}),e=t.rows||[];if(!e.length)return;const s=await a.e(974).then(a.t.bind(a,4974,23)),i=new s.Workbook,r=i.addWorksheet("筛选数据"),n=Object.keys(e[0]);r.columns=n.map((t=>({header:t,key:t,width:20}))),e.forEach((t=>r.addRow(t)));const o=await i.xlsx.writeBuffer(),l=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.saveBlob(l,"筛选结果.xlsx")}catch(t){console.error("下载当前数据失败:",t)}},saveBlob(t,e){const a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.setAttribute("download",e),document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}),Ft=Ot,Tt=(0,l.A)(Ft,At,kt,!1,null,"810b27b8",null),$t=Tt.exports,Lt={name:"DashboardPage",components:{FilterSection:$,ChartRow:Dt,DataTable:$t},data(){return{filters:{},currentPageData:[]}},methods:{handleFilterChange(t){this.filters=t}}},Mt=Lt,jt=(0,l.A)(Mt,S,D,!1,null,"3df3225c",null),Rt=jt.exports,Bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-page"},[t._m(0),e("FilterSection",{on:{"filter-change":t.handleFilterChange}}),e("div",{staticClass:"dashboard-container"},[e("ChartRow",{attrs:{filters:t.filters}}),e("DataTable",{attrs:{filters:t.filters},on:{"page-data":function(e){t.currentPageData=e}}})],1)],1)},Et=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-title-block"},[e("h1",{staticClass:"dashboard-title"},[t._v("上市公司数据资产情况")]),e("p",{staticClass:"dashboard-subtitle"},[t._v("Overview of Listed Company Data Assets")])])}],Nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-section"},[e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-item"},[e("label",[t._v("入表时间：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.startDate=e.target.multiple?a:a[0]},t.emitFilters]}},[e("option",{attrs:{value:""}},[t._v("开始时间")]),t._l(t.options.month_time,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])}))],2),e("span",{staticClass:"to-text"},[t._v("-")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.endDate=e.target.multiple?a:a[0]},t.emitFilters]}},[e("option",{attrs:{value:""}},[t._v("结束时间")]),t._l(t.options.month_time,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])}))],2)]),e("div",{staticClass:"filter-item"},[e("label",[t._v("省级行政区：")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.province,expression:"province"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.province=e.target.multiple?a:a[0]},t.emitFilters]}},[e("option",{attrs:{value:""}},[t._v("全部")]),t._l(t.options.province_area,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])}))],2)])]),e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-item"},[e("label",[t._v("入表企业：")]),e("el-select",{attrs:{filterable:"",remote:"",clearable:"",placeholder:"请输入关键词","remote-method":t.fetchCompanyOptions,loading:t.loading.company},on:{change:t.emitFilters},model:{value:t.company,callback:function(e){t.company=e},expression:"company"}},t._l(t.companyOptions,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"filter-item"},[e("label",[t._v("数据资产内容：")]),e("el-select",{attrs:{filterable:"",remote:"",clearable:"",placeholder:"请输入关键词","remote-method":t.fetchContentOptions,loading:t.loading.content},on:{change:t.emitFilters},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},t._l(t.contentOptions,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"filter-item"},[e("button",{staticClass:"clear-all-btn",on:{click:t.clearFilters}},[t._v("清除筛选")])])])])},zt=[],qt={name:"LSFilterSection",data(){return{startDate:"",endDate:"",province:"",company:"",content:"",companyOptions:[],contentOptions:[],options:{month_time:[],province_area:[]},loading:{company:!1,content:!1}}},mounted(){this.fetchOptions()},methods:{fetchOptions(){m.A.get("/api/lasset/options").then((t=>{this.options.month_time=t.data.month_time||[],this.options.province_area=t.data.province_area||[]})).catch((t=>{console.error("加载筛选项失败:",t)}))},fetchCompanyOptions(t){t&&(this.loading.company=!0,m.A.get(`/api/lasset/search/company?q=${t}`).then((t=>{this.companyOptions=t.data})).finally((()=>{this.loading.company=!1})))},fetchContentOptions(t){t&&(this.loading.content=!0,m.A.get(`/api/lasset/search/content?q=${t}`).then((t=>{this.contentOptions=t.data})).finally((()=>{this.loading.content=!1})))},emitFilters(){this.$emit("filter-change",{startDate:this.startDate,endDate:this.endDate,province:this.province,company:this.company,content:this.content})},clearFilters(){this.startDate="",this.endDate="",this.province="",this.company="",this.content="",this.emitFilters()}}},Kt=qt,Wt=(0,l.A)(Kt,Nt,zt,!1,null,"547f2964",null),Ut=Wt.exports,Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-grid"},[e("div",{staticClass:"chart-row"},[e("div",{staticClass:"chart-bar40"},[e("BarChart1",{attrs:{filters:t.filters}})],1),e("div",{staticClass:"chart-pie60"},[e("PieChart1",{attrs:{filters:t.filters}})],1)]),e("div",{staticClass:"chart-row"},[e("div",{staticClass:"chart-full"},[e("BarChart2",{attrs:{filters:t.filters}})],1)]),e("div",{staticClass:"chart-row"},[e("div",{staticClass:"chart-half"},[e("PieChart2",{attrs:{filters:t.filters}})],1),e("div",{staticClass:"chart-half"},[e("PieChart3",{attrs:{filters:t.filters}})],1)])])},Ht=[],It=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各省份企业数量")]),e("v-chart",{staticStyle:{width:"100%",height:"360px"},attrs:{option:t.barChartOption}})],1)},Yt=[];(0,z.Y)([q.a,K.a,W.a,U.a,V.a,H.a]);var Gt=(0,s.defineComponent)({name:"LSBarChart1",components:{"v-chart":B.Ay},props:["filters"],data(){return{barChartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/lasset/stats",{field:"province_area",filters:this.filters}).then((t=>{const e=t.data;this.barChartOption={color:N,tooltip:{},xAxis:{type:"category",data:e.map((t=>t.name)),axisLabel:{rotate:30,overflow:"truncate",formatter:function(t){return t.length>6?t.slice(0,6)+"…":t}}},yAxis:{type:"value",name:"入表企业数量（家）",nameLocation:"middle",nameGap:40,nameTextStyle:{fontSize:12}},series:[{type:"bar",data:e.map((t=>t.value))}]}})).catch((t=>{console.error("加载图表失败:",t)}))}}}),Xt=Gt,Jt=(0,l.A)(Xt,It,Yt,!1,null,"1193e62e",null),Qt=Jt.exports,Zt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各企业类型与行政级别占比")]),e("v-chart",{staticStyle:{width:"100%",height:"360px"},attrs:{option:t.chartOption}})],1)},te=[];(0,z.Y)([q.a,Z.a,W.a,U.a,H.a,tt.a]);var ee=(0,s.defineComponent)({name:"LSPieChart1",components:{VChart:B.Ay},props:{filters:{type:Object,required:!0}},data(){return{chartOption:{}}},mounted(){this.loadData()},watch:{filters:{handler(){this.loadData()},immediate:!0,deep:!0}},methods:{async loadData(){try{const t=await m.A.post("/api/lasset/stats",{field:"company_type",filters:this.filters}),e=t.data,a=await m.A.post("/api/lasset/stats",{field:"admin_level",filters:{...this.filters,company_type:"地方国企"}}),s=a.data;this.chartOption={color:N,tooltip:{trigger:"item"},legend:{show:!1},series:[{name:"企业类型",type:"pie",radius:"50%",center:["25%","50%"],label:{show:!0,formatter:t=>`${t.name}: ${t.value}`,position:"outside"},labelLine:{show:!0},data:e},{name:"行政级别",type:"pie",radius:"40%",center:["75%","50%"],label:{show:!0,formatter:t=>`${t.name}: ${t.value}`,position:"inside"},labelLine:{show:!0},data:s}],graphic:[{type:"line",shape:{x1:150,y1:90,x2:455,y2:108},style:{stroke:"#888",lineWidth:1}},{type:"line",shape:{x1:150,y1:270,x2:455,y2:252},style:{stroke:"#888",lineWidth:1}}]}}catch(t){console.error("加载图表数据失败:",t)}}}}),ae=ee,se=(0,l.A)(ae,Zt,te,!1,null,"e38a49a6",null),ie=se.exports,re=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各企业业务类型的企业数量")]),e("v-chart",{staticStyle:{width:"1000px",height:"450px"},attrs:{option:t.chartOption}})],1)},ne=[],oe=(0,s.defineComponent)({name:"LSBarChart2",components:{"v-chart":B.Ay},props:["filters"],data(){return{chartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/lasset/stats",{field:"business_type",filters:this.filters}).then((t=>{const e=t.data;this.chartOption={color:N,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:e.map((t=>t.name)),axisLabel:{fontSize:12,rotate:30,formatter:t=>t.length>6?t.slice(0,6)+"…":t}},yAxis:{type:"value",name:"企业业务类型",nameLocation:"middle",nameGap:60,nameTextStyle:{fontSize:14}},series:[{type:"bar",data:e.map((t=>t.value))}]}})).catch((t=>{console.error("加载 BarChart2 图表失败:",t)}))}}}),le=oe,ce=(0,l.A)(le,re,ne,!1,null,"651ea6cb",null),de=ce.exports,he=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各数据资产类型的企业数量")]),e("v-chart",{staticStyle:{width:"600px",height:"400px"},attrs:{option:t.chartOption}})],1)},pe=[],ue=(0,s.defineComponent)({name:"LSPieChart2",components:{"v-chart":B.Ay},props:["filters"],data(){return{chartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/lasset/stats",{field:"dataasset_type",filters:this.filters}).then((t=>{this.chartOption={color:N,tooltip:{trigger:"item"},legend:{show:!1},series:[{type:"pie",radius:"60%",label:{show:!0,formatter:function(t){return`${t.name}: ${t.value}`},position:"outside"},labelLine:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:t.data}]}})).catch((t=>{console.error("加载 PieChart2 图表失败:",t)}))}}}),me=ue,fe=(0,l.A)(me,he,pe,!1,null,"3db92e6e",null),ve=fe.exports,ge=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chart-wrapper"},[e("div",{staticClass:"chart-title"},[t._v("各资产登记机构的企业数量")]),e("v-chart",{staticStyle:{width:"600px",height:"400px"},attrs:{option:t.chartOption}})],1)},_e=[],be=(0,s.defineComponent)({name:"LSPieChart3",components:{"v-chart":B.Ay},props:["filters"],data(){return{chartOption:{}}},watch:{filters:{handler(){this.loadChart()},immediate:!0,deep:!0}},methods:{loadChart(){m.A.post("/api/lasset/stats",{field:"dataasset_register_addrtype",filters:this.filters}).then((t=>{this.chartOption={color:N,tooltip:{trigger:"item"},legend:{show:!1},series:[{type:"pie",radius:"60%",data:t.data,label:{show:!0,formatter:function(t){return`${t.name}: ${t.value}`},position:"outside"},labelLine:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})).catch((t=>{console.error("加载 PieChart3 图表失败:",t)}))}}}),Ce=be,ye=(0,l.A)(Ce,ge,_e,!1,null,"424f498f",null),we=ye.exports,Pe={name:"ChartRow",components:{BarChart1:Qt,PieChart1:ie,BarChart2:de,PieChart2:ve,PieChart3:we},props:{filters:{type:Object,required:!0}}},xe=Pe,Se=(0,l.A)(xe,Vt,Ht,!1,null,"8176c8d6",null),De=Se.exports,Ae=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-section"},[e("h3",{staticClass:"section-title"},[t._v("搜索结果数据详情")]),e("div",{staticClass:"table-wrapper"},[e("table",{staticClass:"data-table"},[t._m(0),e("tbody",t._l(t.tableData,(function(a,s){return e("tr",{key:a.id},[e("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((t.currentPage-1)*t.pageSize+s+1))]),e("td",[t._v(t._s(a.month_time))]),e("td",[t._v(t._s(a.province_area))]),e("td",[t._v(t._s(a.company_name))]),e("td",[t._v(t._s(a.dataasset_type))]),e("td",[t._v(t._s(a.accounting_subject))]),e("td",[t._v(t._s(a.valuation_method))]),e("td",[t._v(t._s(a.dataasset_register_addr))]),e("td",{staticClass:"number-cell"},[t._v(t._s(t.formatNumber(a.book_value)))]),e("td",{staticClass:"number-cell"},[t._v(t._s(t.formatNumber(a.finance_value)))])])})),0)])]),e("div",{staticClass:"pagination"},[e("div",{staticClass:"pagination-left"},[e("el-dropdown",{on:{command:t.handleExportCommand}},[e("el-button",{staticClass:"export-small-btn",attrs:{type:"primary"}},[t._v(" 下载 Excel"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"all"}},[t._v("下载全部数据")]),e("el-dropdown-item",{attrs:{command:"current"}},[t._v("下载当前数据")])],1)],1)],1),e("div",{staticClass:"pagination-center"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:function(e){return t.changePage(t.currentPage-1)}}},[t._v("上一页")]),e("span",{staticClass:"page-info"},[t._v(t._s(t.currentPage)+" / "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage>=t.totalPages},on:{click:function(e){return t.changePage(t.currentPage+1)}}},[t._v("下一页")])]),e("div",{staticClass:"pagination-right"})])])},ke=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticStyle:{width:"30px","text-align":"center"}},[t._v("序号")]),e("th",[t._v("入表时间")]),e("th",[t._v("省级行政区")]),e("th",[t._v("入表企业")]),e("th",[t._v("数据资产类型")]),e("th",[t._v("会计科目")]),e("th",[t._v("评估方法")]),e("th",[t._v("数据资产登记机构")]),e("th",[t._v("账面金额（万元）")]),e("th",[t._v("融资金额（万元）")])])])}],Oe={name:"LSDataTable",props:["filters"],data(){return{currentPage:1,pageSize:10,tableData:[],totalRows:0}},watch:{filters:{handler(){this.currentPage=1,this.loadData()},immediate:!0,deep:!0}},computed:{totalPages(){return Math.max(1,Math.ceil(this.totalRows/this.pageSize))}},methods:{loadData(){m.A.post("/api/lasset/query",{page:this.currentPage,pageSize:this.pageSize,filters:this.filters}).then((t=>{this.tableData=t.data.rows||[],this.totalRows=t.data.total||0,this.$emit("page-data",this.tableData)})).catch((t=>{console.error("加载表格失败:",t)}))},changePage(t){t<1||t>this.totalPages||(this.currentPage=t,this.loadData())},formatNumber(t){if(null===t||void 0===t||""===t)return"-";const e=parseFloat(t);return isNaN(e)?t:e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},handleExportCommand(t){"all"===t?this.downloadFull():"current"===t&&this.downloadCurrent()},downloadFull(){m.A.post("/api/lasset/export",{filters:this.filters},{responseType:"blob"}).then((t=>this.saveBlob(t.data,"全部数据.xlsx"))).catch((t=>console.error("导出失败:",t)))},async downloadCurrent(){try{const{data:t}=await m.A.post("/api/lasset/query",{page:1,pageSize:1e4,filters:this.filters}),e=t.rows||[];if(!e.length)return;const s=await a.e(974).then(a.t.bind(a,4974,23)),i=new s.Workbook,r=i.addWorksheet("筛选数据"),n=Object.keys(e[0]);r.columns=n.map((t=>({header:t,key:t,width:20}))),e.forEach((t=>r.addRow(t)));const o=await i.xlsx.writeBuffer(),l=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.saveBlob(l,"筛选结果.xlsx")}catch(t){console.error("下载当前数据失败:",t)}},saveBlob(t,e){const a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.setAttribute("download",e),document.body.appendChild(s),s.click(),document.body.removeChild(s)}}},Fe=Oe,Te=(0,l.A)(Fe,Ae,ke,!1,null,"3416eb50",null),$e=Te.exports,Le={name:"ListedCompanyDashboardPage",components:{FilterSection:Ut,ChartRow:De,DataTable:$e},data(){return{filters:{},currentPageData:[]}},methods:{handleFilterChange(t){this.filters=t}}},Me=Le,je=(0,l.A)(Me,Bt,Et,!1,null,"0e26cea5",null),Re=je.exports,Be=(a(2489),function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin-container"},[e("aside",{class:["sidebar",{collapsed:t.isSidebarCollapsed}]},[t.isSidebarCollapsed?t._e():e("div",{staticClass:"sidebar-title"},[t._v(" 数据明细管理 "),e("button",{staticClass:"collapse-btn",on:{click:t.toggleSidebar}},[t._v("◀")])]),t.isSidebarCollapsed?t._e():e("nav",{staticClass:"menu"},[e("div",{staticClass:"menu-item",class:{active:"listed"===t.currentTab},on:{click:function(e){return t.switchTab("listed")}}},[t._v(" 上市公司数据 ")]),e("div",{staticClass:"menu-item",class:{active:"nonlisted"===t.currentTab},on:{click:function(e){return t.switchTab("nonlisted")}}},[t._v(" 非上市公司数据 ")])])]),t.isSidebarCollapsed?e("button",{staticClass:"expand-btn",on:{click:t.toggleSidebar}},[t._v("▶")]):t._e(),e("main",{staticClass:"content"},[e("h1",{staticClass:"content-title"},[t._v(t._s("listed"===t.currentTab?"上市公司数据":"非上市公司数据"))]),e("p",{staticClass:"update-time"},[t._v("上次更新时间："+t._s(t.lastUpdate))]),e("div",{staticClass:"search-bar"},[e("button",{staticClass:"clear-all-btn",on:{click:t.clearAllFilters}},[t._v("清空全部筛选")]),e("label",[t._v("关键词检索：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKeyword,expression:"searchKeyword"}],attrs:{placeholder:"请输入关键词..."},domProps:{value:t.searchKeyword},on:{input:[function(e){e.target.composing||(t.searchKeyword=e.target.value)},t.handleSearch]}})]),t.pagedData.length>0?e("div",{staticClass:"table-wrapper"},[e("table",{staticClass:"data-table"},[e("thead",[e("tr",[e("th",[t._v("序号")]),t._v(" "),t._l(t.tableHeaders.filter((t=>"id"!==t)),(function(a){return e("th",{key:a,staticStyle:{position:"relative"}},[e("div",{staticClass:"th-wrapper"},[t._v(" "+t._s(a)+" "),e("span",{staticClass:"filter-icon",attrs:{"data-filter-icon":a},on:{click:function(e){return e.stopPropagation(),t.toggleFilterDropdown(a)}}},[t._v("⏷")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFilterDropdown[a],expression:"showFilterDropdown[col]"}],staticClass:"filter-dropdown",attrs:{"data-dropdown":a},on:{click:function(t){t.stopPropagation()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterSearch[a],expression:"filterSearch[col]"}],staticClass:"filter-search-input",attrs:{placeholder:"搜索该列..."},domProps:{value:t.filterSearch[a]},on:{input:function(e){e.target.composing||t.$set(t.filterSearch,a,e.target.value)}}}),e("div",{staticClass:"filter-options"},t._l(t.getFilteredOptions(a),(function(s){return e("label",{key:s},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pendingFilters[a],expression:"pendingFilters[col]"}],attrs:{type:"checkbox"},domProps:{value:s,checked:Array.isArray(t.pendingFilters[a])?t._i(t.pendingFilters[a],s)>-1:t.pendingFilters[a]},on:{change:function(e){var i=t.pendingFilters[a],r=e.target,n=!!r.checked;if(Array.isArray(i)){var o=s,l=t._i(i,o);r.checked?l<0&&t.$set(t.pendingFilters,a,i.concat([o])):l>-1&&t.$set(t.pendingFilters,a,i.slice(0,l).concat(i.slice(l+1)))}else t.$set(t.pendingFilters,a,n)}}}),t._v(" "+t._s(s)+" ")])})),0),e("div",{staticClass:"filter-footer"},[e("button",{on:{click:function(e){return t.clearFilter(a)}}},[t._v("清空筛选")]),e("button",{on:{click:function(e){return t.confirmFilter(a)}}},[t._v("确定")])])])])])}))],2)]),e("tbody",t._l(t.pagedData,(function(a,s){return e("tr",{key:s,class:t.getRowClass(a)},[e("td",{on:{click:function(e){return t.toggleRowState(a)}}},[e("div",{staticStyle:{display:"flex","align-items":"center",gap:"6px"}},[e("span",[t._v(t._s((t.currentPage-1)*t.pageSize+s+1))]),t.getRowButton(a)?e("button",{staticClass:"row-status-btn",class:t.getRowButton(a)?.color},[t._v(" "+t._s(t.getRowButton(a)?.label)+" ")]):t._e()])]),t._l(a,(function(s,i){return e("td",{directives:[{name:"show",rawName:"v-show",value:"id"!==i,expression:"key !== 'id'"}],key:i,class:t.getCellClass(a,i)},[t.isCellChanged(a,i)?e("button",{staticClass:"cell-status-btn red",on:{click:function(e){return t.toggleCellState(a,i)}}},[t._v(" "+t._s(t.getCellStatusLabel(a,i))+" ")]):t._e(),e("span",{domProps:{innerHTML:t._s(t.highlight(s,i))}})])}))],2)})),0)])]):e("p",{staticClass:"no-data"},[t._v("暂无数据")]),t.totalPages>1?e("div",{staticClass:"pagination"},[t.currentPage>1?e("button",{on:{click:function(e){return t.changePage(t.currentPage-1)}}},[t._v("上一页")]):t._e(),e("span",{staticClass:"page-info"},[t._v(t._s(t.currentPage)+" / "+t._s(t.totalPages))]),t.currentPage<t.totalPages?e("button",{on:{click:function(e){return t.changePage(t.currentPage+1)}}},[t._v("下一页")]):t._e()]):t._e(),e("div",{staticClass:"export-controls"},[e("label",{staticClass:"upload-btn"},[t._v(" 上传数据 "),e("input",{attrs:{type:"file",accept:".xlsx",hidden:""},on:{change:t.handleUpload}})]),e("button",{staticClass:"export-btn",on:{click:t.exportExcel}},[t._v("导出 Excel")])])])])}),Ee=[],Ne=(a(1148),a(116),a(3579),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),{name:"AdminPage",data(){return{currentTab:"listed",tableData:[],tableHeaders:[],lastUpdate:"",currentPage:1,totalPages:1,pageSize:15,isSidebarCollapsed:!1,filters:{},pendingFilters:{},filterSearch:{},uniqueColumnValues:{},searchKeyword:"",showFilterDropdown:{},rowStatus:{}}},computed:{filteredData(){return this.tableData.filter((t=>Object.keys(this.filters).every((e=>{const a=this.filters[e];return!a||0===a.length||a.includes(t[e])}))))},searchedData(){if(!this.searchKeyword)return this.filteredData;const t=this.searchKeyword.toLowerCase();return this.filteredData.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(t)))))},pagedData(){const t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.searchedData.slice(t,e)}},methods:{getRowKey(t){return`${t.company_name}_${t.year_month}`},getRowClass(t){const e=this.rowStatus[this.getRowKey(t)];return"deleted"===e?.rowState?"row-deleted":""},getRowButton(t){const e=this.rowStatus[this.getRowKey(t)];if(!e||!e.changed?.length)return null;const a=e.rowState||"active";return{label:"deleted"===a?"删除":"变动",color:"deleted"===a?"red":"blue"}},toggleRowState(t){const e=this.getRowKey(t),a=this.rowStatus[e],s="deleted"===a?.rowState?"active":"deleted";a&&this.$set(a,"rowState",s)},isCellChanged(t,e){const a=this.getRowKey(t);return this.rowStatus[a]?.changed?.includes(e)},getCellClass(t,e){return this.isCellChanged(t,e)?"cell-changed":""},toggleCellState(t,e){const a=this.getRowKey(t);this.rowStatus[a]?.cellState||this.$set(this.rowStatus[a],"cellState",{});const s=this.rowStatus[a].cellState[e],i="deleted"===s?"active":"deleted";this.$set(this.rowStatus[a].cellState,e,i)},getCellStatusLabel(t,e){const a=this.getRowKey(t),s=this.rowStatus[a]?.cellState?.[e];return"deleted"===s?"使用":"变动"},async handleUpload(t){const e=t.target.files[0];if(!e)return;const a=new FormData;a.append("file",e);const s="listed"===this.currentTab?"non_listed_companies_20250414":"non_listed_companies_2025q1";try{const t=await m.A.post(`/api/upload/append?tableName=${s}`,a,{headers:{"Content-Type":"multipart/form-data"}}),e=t.data?.newRows||[];e.forEach((t=>{const e=this.getRowKey(t),a=this.tableData.find((e=>e.company_name===t.company_name&&e.year_month===t.year_month));if(a){const s=[];Object.keys(t).forEach((e=>{"id"!==e&&t[e]!==a[e]&&s.push(e)})),s.length&&(this.tableData.push({...t}),this.$set(this.rowStatus,e,{changed:s,rowState:"active",cellState:{}}))}else this.tableData.push({...t})})),this.totalPages=Math.ceil(this.tableData.length/this.pageSize)}catch(i){alert("上传失败："+(i.response?.data?.error||i.message))}},toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed},switchTab(t){this.currentTab=t,this.clearAllFilters(),this.loadData()},async loadData(){try{const t="listed"===this.currentTab?"/api/company/listed-companies-detail":"/api/company/non-listed-companies-detail",e=await m.A.get(t);this.tableData=e.data,this.tableHeaders=e.data.length>0?Object.keys(e.data[0]):[];const a={};e.data.forEach((t=>{for(const e in t)a[e]||(a[e]=new Set),null!==t[e]&&""!==t[e]&&a[e].add(t[e])})),this.uniqueColumnValues=Object.fromEntries(Object.entries(a).map((([t,e])=>[t,Array.from(e)]))),this.totalPages=Math.max(1,Math.ceil(e.data.length/this.pageSize));const s=new Date;this.lastUpdate=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")} ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}:${String(s.getSeconds()).padStart(2,"0")}`}catch(t){console.error("数据加载失败：",t),this.tableData=[],this.tableHeaders=[]}},clearAllFilters(){this.filters={},this.pendingFilters={},this.filterSearch={},this.searchKeyword="",this.currentPage=1},toggleFilterDropdown(t){this.closeAllDropdowns(),this.$set(this.showFilterDropdown,t,!0),this.$set(this.pendingFilters,t,[...this.filters[t]||[]]),this.$nextTick((()=>{const e=this.$el.querySelector(`[data-filter-icon="${t}"]`),a=this.$el.querySelector(`[data-dropdown="${t}"]`);if(e&&a){const t=e.getBoundingClientRect();a.style.position="fixed",a.style.left=`${t.left-a.offsetWidth+e.offsetWidth}px`,a.style.top=`${t.bottom+4}px`,a.style.zIndex="9999"}}))},confirmFilter(t){this.$set(this.filters,t,[...this.pendingFilters[t]||[]]),this.$set(this.showFilterDropdown,t,!1),this.currentPage=1},clearFilter(t){this.$set(this.pendingFilters,t,[]),this.$set(this.filters,t,[]),this.$set(this.showFilterDropdown,t,!1),this.currentPage=1},closeAllDropdowns(){Object.keys(this.showFilterDropdown).forEach((t=>{this.$set(this.showFilterDropdown,t,!1)}))},handleClickOutside(t){const e=this.$el.querySelectorAll(".filter-dropdown");for(let a of e)if(a.contains(t.target))return;this.closeAllDropdowns()},getFilteredOptions(t){const e=(this.filterSearch[t]||"").toLowerCase();return this.uniqueColumnValues[t].filter((t=>String(t).toLowerCase().includes(e)))},handleSearch(){this.currentPage=1},highlight(t,e){if(!this.searchKeyword||"string"!==typeof t)return t;const a=this.searchKeyword.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${a})`,"gi");return t.replace(s,"<mark>$1</mark>")},changePage(t){t<1||t>this.totalPages||(this.currentPage=t)},exportExcel(){const t="listed"===this.currentTab?"non_listed_companies_20250414":"non_listed_companies_2025q1";window.open(`/api/export/${t}`)}},watch:{searchedData(t){this.totalPages=Math.max(1,Math.ceil(t.length/this.pageSize)),this.currentPage>this.totalPages&&(this.currentPage=1)}},mounted(){this.loadData(),document.addEventListener("mousedown",this.handleClickOutside)},beforeDestroy(){document.removeEventListener("mousedown",this.handleClickOutside)}}),ze=Ne,qe=(0,l.A)(ze,Be,Ee,!1,null,"13875363",null),Ke=qe.exports;s["default"].use(h.Ay);const We=[{path:"/",name:"HomePage",component:x},{path:"/dashboard",name:"DashboardPage",component:Rt},{path:"/lsdashboard",name:"ListedCompanyDashboardPage",component:Re},{path:"/admin-page",name:"AdminPage",component:Ke,beforeEnter:(t,e,a)=>{"true"===localStorage.getItem("adminLoggedIn")?a():a("/")}}];var Ue=new h.Ay({routes:We}),Ve=a(1052),He=a.n(Ve);s["default"].config.productionTip=!1,s["default"].use(He()),new s["default"]({router:Ue,render:t=>t(d)}).$mount("#app")},8305:function(t,e,a){t.exports=a.p+"img/header_image.177f1012.jpg"},8547:function(t,e,a){t.exports=a.p+"img/footer_image.7737e807.jpg"}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,i,r){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],i=t[d][1],r=t[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,r<n&&(n=r));if(o){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[s,i,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"===typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"===typeof s.then)return s}var r=Object.create(null);a.r(r);var n={};t=t||[null,e({}),e([]),e(e)];for(var o=2&i&&s;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((function(t){n[t]=function(){return s[t]}}));return n["default"]=function(){return s},a.d(r,n),r}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".602cfbc4.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="data_asset_platform:";a.l=function(s,i,r,n){if(t[s])t[s].push(i);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==s||h.getAttribute("data-webpack")==e+r){o=h;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",e+r),o.src=s),t[s]=[i];var p=function(e,a){o.onerror=o.onload=null,clearTimeout(u);var i=t[s];if(delete t[s],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(t){return t(a)})),e)return e(a)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){var t={524:0};a.f.j=function(e,s){var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise((function(a,s){i=t[e]=[a,s]}));s.push(i[2]=r);var n=a.p+a.u(e),o=new Error,l=function(s){if(a.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",o.name="ChunkLoadError",o.type=r,o.request=n,i[1](o)}};a.l(n,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,r,n=s[0],o=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var d=l(a)}for(e&&e(s);c<n.length;c++)r=n[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},s=self["webpackChunkdata_asset_platform"]=self["webpackChunkdata_asset_platform"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(1602)}));s=a.O(s)})();
//# sourceMappingURL=app.36ffb376.js.map